<Box
            className="content-block conversation"
            flex="none"
            width="100%"
            height="200px"
            overflow="hidden"
            borderTop="1px solid #e7e7e7"
            mt="4"
          >
            <Text className="content-block-title" px="4" pt="4" pb="1">
              conversation
            </Text>
            <Box
              className="content-block-body"
              px="2"
              overflow="auto"
              data-conversation-content
              height="calc(200px - 24px)"
            >
              {!items.length && "awaiting connection..."}
              {items.map((conversationItem) => (
                <Flex
                  key={conversationItem.id}
                  className="conversation-item"
                  position="relative"
                  align="flex-start"
                  gap="4"
                  mb="4"
                  _hover={{ ".close": { display: "flex" } }}
                >
                  {/* Speaker */}
                  <VStack
                    className={`speaker ${conversationItem.role || ""}`}
                    align="start"
                    width="80px"
                    color={
                      conversationItem.role === "user"
                        ? "#0099ff"
                        : conversationItem.role === "assistant"
                        ? "#009900"
                        : "#101010"
                    }
                  >
                    <Text>
                      {(conversationItem.role || conversationItem.type).replaceAll(
                        "_",
                        " "
                      )}
                    </Text>
                    <Box
                      className="close"
                      position="absolute"
                      top="0"
                      right="-5"
                      bg="#aaa"
                      color="#fff"
                      display="none"
                      borderRadius="full"
                      p="0.5"
                      cursor="pointer"
                      _hover={{ bg: "#696969" }}
                      onClick={() => deleteConversationItem(conversationItem.id)}
                    >
                      <CloseIcon boxSize="3" />
                    </Box>
                  </VStack>

                  {/* Speaker Content */}
                  <Box className="speaker-content" color="#18181b" wordBreak="break-word">
                    {/* Function Call Output */}
                    {conversationItem.type === "function_call_output" && (
                      <Text>{conversationItem.formatted.output}</Text>
                    )}
                    {/* Tool Call */}
                    {conversationItem.formatted.tool && (
                      <Text>
                        {conversationItem.formatted.tool.name}(
                        {conversationItem.formatted.tool.arguments})
                      </Text>
                    )}
                    {/* User Message */}
                    {!conversationItem.formatted.tool &&
                      conversationItem.role === "user" && (
                        <Text>
                          {conversationItem.formatted.transcript ||
                            (conversationItem.formatted.audio?.length
                              ? "(awaiting transcript)"
                              : conversationItem.formatted.text ||
                                "(item sent)")}
                        </Text>
                      )}
                    {/* Assistant Message */}
                    {!conversationItem.formatted.tool &&
                      conversationItem.role === "assistant" && (
                        <Text>
                          {conversationItem.formatted.transcript ||
                            conversationItem.formatted.text ||
                            "(truncated)"}
                        </Text>
                      )}
                  </Box>
                </Flex>
              ))}
            </Box>
          </Box>